/**
 * angular-adn
 * @version v0.0.7 - 2013-08-15
 * @link https://github.com/appdotnet/angular-adn
 * @author App.net <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("adn",[]),angular.module("adn").provider("ADNConfig",function(){this.configuation={},this.$get=function(){return{config:this.configuation,get:function(a,b){return this.config.hasOwnProperty(a)?this.config[a]:b}}},this.setConfig=function(a){this.configuation=angular.extend({},this.configuation,a)}}),angular.module("adn").factory("Auth",["$rootScope","$location",function(a,b){return a.local=JSON.parse("undefined"!=typeof localStorage.data?localStorage.data:"{}"),a.$watch("local",function(){localStorage.data=JSON.stringify(a.local)},!0),{isLoggedIn:function(b){return void 0===b&&(b=a.local),b&&"undefined"!=typeof b.accessToken},logout:function(){a.local={},localStorage.clear()},login:function(){a.local.accessToken=a.local.accessToken||jQuery.url(b.absUrl()).fparam("access_token"),b.hash("")}}}]),angular.module("adn").factory("ApiClient",["$rootScope","$http","ADNConfig",function(a,b,c){var d=["get","head","post","put","delete","jsonp"],e=function(d){return function(e){return e.headers=e.headers||{},a.local&&a.local.accessToken&&(e.headers.Authorization="Bearer "+a.local.accessToken),e.url=c.get("api_client_root","https://alpha-api.app.net/stream/0/")+e.url,e.method=d,"post"===d&&e.data&&!e.headers["Content-Type"]&&(e.data=jQuery.param(e.data),e.headers["Content-Type"]="application/x-www-form-urlencoded"),b(e)}},f={};return _.each(d,function(a){f[a]=e(a)}),f.postJson=function(a){return a.headers=a.headers||{},a.headers["Content-Type"]="application/json",(!angular.isString(a.data)&&angular.isObject(a.data)||angular.isArray(a.data))&&(a.data=angular.toJson(a.data)),f.post(a)},f}]);